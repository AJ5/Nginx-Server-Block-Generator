/* Copyright (C) 2012 PrimeBox (info@primebox.co.uk) under Creative Commons Attribution 3.0 Unported License */
(function(b){b.cookieBar=function(a,h){var d="cookies"==a?"cookies":"set"==a?"set":!1;a=b.extend({message:"We use cookies to track usage and preferences.",acceptButton:!0,acceptText:"I Understand",acceptFunction:function(a){"enabled"!=a&&"accepted"!=a&&(window.location=window.location.href)},declineButton:!1,declineText:"Disable Cookies",declineFunction:function(a){if("enabled"==a||"accepted"==a)window.location=window.location.href},policyButton:!1,policyText:"Privacy Policy",policyURL:"/privacy-policy/",
autoEnable:!0,acceptOnContinue:!1,acceptOnScroll:!1,acceptAnyClick:!1,expireDays:365,renewOnVisit:!1,forceShow:!1,effect:"slide",element:"body",append:!1,fixed:!1,bottom:!1,zindex:"",domain:String(window.location.hostname),referrer:String(document.referrer)},a);var e=new Date;e.setTime(e.getTime()+864E5*a.expireDays);var e=e.toGMTString(),k="cb-enabled={value}; expires="+e+"; path=/",f,c="",g,l=document.cookie.split("; ");for(f=0;f<l.length;f++)g=l[f].split("="),"cb-enabled"==g[0]&&(c=g[1]);""==c&&
"cookies"!=d&&a.autoEnable?(c="enabled",document.cookie=k.replace("{value}","enabled")):"accepted"!=c&&"declined"!=c||"cookies"==d||!a.renewOnVisit||(document.cookie=k.replace("{value}",c));a.acceptOnContinue&&0<=a.referrer.indexOf(a.domain)&&-1==String(window.location.href).indexOf(a.policyURL)&&"cookies"!=d&&"set"!=d&&"accepted"!=c&&"declined"!=c&&(d="set",h="accepted");if("cookies"==d)return"enabled"==c||"accepted"==c?!0:!1;if("set"!=d||"accepted"!=h&&"declined"!=h){var d=a.message.replace("{policy_url}",
a.policyURL),e=a.acceptButton?'<a href="" class="cb-enable">'+a.acceptText+"</a>":"",r=a.declineButton?'<a href="" class="cb-disable">'+a.declineText+"</a>":"",t=a.policyButton?'<a href="'+a.policyURL+'" class="cb-policy">'+a.policyText+"</a>":"",u=a.fixed?a.bottom?' class="fixed bottom"':' class="fixed"':"",v=""!=a.zindex?' style="z-index:'+a.zindex+';"':"";if(a.forceShow||"enabled"==c||""==c)a.append?b(a.element).append('<div id="cookie-bar"'+u+v+"><p>"+d+e+r+t+"</p></div>"):b(a.element).prepend('<div id="cookie-bar"'+
u+v+"><p>"+d+e+r+t+"</p></div>");var x=function(q){a.acceptOnScroll&&b(document).off("scroll");"function"===typeof q&&q(c);"slide"==a.effect?b("#cookie-bar").slideUp(300,function(){b("#cookie-bar").remove()}):"fade"==a.effect?b("#cookie-bar").fadeOut(300,function(){b("#cookie-bar").remove()}):b("#cookie-bar").hide(0,function(){b("#cookie-bar").remove()});b(document).unbind("click",w)},n=function(){document.cookie=k.replace("{value}","accepted");x(a.acceptFunction)},w=function(a){b(a.target).hasClass("cb-policy")||
n()};b("#cookie-bar .cb-enable").click(function(){n();return!1});b("#cookie-bar .cb-disable").click(function(){var b=new Date;b.setTime(b.getTime()-864E6);b=b.toGMTString();l=document.cookie.split("; ");for(f=0;f<l.length;f++)g=l[f].split("="),0<=g[0].indexOf("_")?document.cookie=g[0]+"=0; expires="+b+"; domain="+a.domain.replace("www","")+"; path=/":document.cookie=g[0]+"=0; expires="+b+"; path=/";document.cookie=k.replace("{value}","declined");x(a.declineFunction);return!1});if(a.acceptOnScroll){var p=
b(document).scrollTop(),m,y;b(document).on("scroll",function(){m=b(document).scrollTop();y=m>p?m-p:p-m;y>=Math.round(a.acceptOnScroll)&&n()})}a.acceptAnyClick&&b(document).bind("click",w)}else return document.cookie=k.replace("{value}",h),"accepted"==h?!0:!1}})(jQuery);